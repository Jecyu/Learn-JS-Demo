<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>在函数内部使用 _this=this</title>
  </head>
  <body>
    <h2>F12/Ctrl+Option+I 查看控制台打印</h2>
    <script>
      /**这个例子中，在 func2 中，首先设置 var _this = this;，这里的 this 是调用 func2 的对象 a，为了防止在 func2 中的 setTimeout 被 window 调用而导致的在 setTimeout 中的 this 为 window。我们将 this(指向变量 a) 赋值给一个变量 _this，这样，在 func2 中我们使用 _this 就是指向对象 a 了。
 */
      var name = 'windowsName';
      var a = {
        name: 'Cherry',

        func1: function() {
          console.log(this.name);
        },

        func2: function() {
          var _this = this;
          setTimeout(function() {
            console.log('_this :', _this);
            _this.func1(); // this 为 a
          }, 100);
        }
      };

      a.func2();
    </script>
  </body>
</html>
